"use strict";angular.module("outstanding",["outstanding.templates","outstanding.pages.landing","outstanding.data","ngAnimate","ui.router","anim-in-out","angular-loading-bar"]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/landing")}]),angular.module("outstanding.data",[]).factory("DataFactory",["$rootScope",function(t){var e={CONTRACT:0,DATE:1,TIME:2,AMOUNT:3},a={data:[],parsedData:[],selectedDate:null,parseData:function(t){return[["Contract","Date","Time","Amount"],[14851,"20/05/2016","12:04:78.594",1405.61],[35156,"20/05/2016","12:37:35.298",23415.51],[29526,"22/05/2016","15:24:31.562",5296.15],[29586,"23/05/2016","11:27:25.158",18150.57],[56556,"04/06/2016","09:51:21.565",9385.19]]},getCol:function(t,e,a){for(var n=[],r=a?1:0,o=r;o<t.length;o++){var i=t[o];n.push(i[e])}return n},getRow:function(t,e){return t[e]},getContractCol:function(t,n){return a.getCol(t,e.CONTRACT,n)},getDateCol:function(t,n){return a.getCol(t,e.DATE,n)},getTimeCol:function(t,n){return a.getCol(t,e.TIME,n)},getAmountCol:function(t,n){return a.getCol(t,e.AMOUNT,n)},getRowByDateString:function(t){for(var n=1,r=n;r<a.parsedData.length;r++){var o=a.parsedData[r];if(o[e.DATE]===t)return o}},getContractVal:function(t){return t[e.CONTRACT]},getDateVal:function(t){return t[e.DATE]},getTimeVal:function(t){return t[e.TIME]},getAmountVal:function(t){return t[e.AMOUNT]}};return t.$watch(function(){return a.data},function(t,e){t&&t!==e&&(a.parsedData=a.parseData(t))},!0),a}]),angular.module("outstanding.calendar",[]).constant("DAY_EVENT_FIELDS",{CONTRACT:"contract",AMOUNT:"amount",DATE:"date",TIME:"time"}).factory("CalendarFactory",["DataFactory","DAY_EVENT_FIELDS",function(t,e){function a(t,e){var a=new Date(e,t+1,0);return c.isUTC?a.getUTCDate():a.getDate()}function n(t,e){for(var n={},r=1,o=a(t,e),i=r;o>=i;i++)n[i]={};return n}function r(t,e){var a,n=new Date(t);return a=c.isUTC?n.getUTCMonth():n.getMonth(),a+=e?1:0}function o(t){var e=new Date(t);return c.isUTC?e.getUTCDate():e.getDate()}function i(t){var e=new Date(t);return c.isUTC?e.getUTCFullYear():e.getFullYear()}function u(t,e){for(var a={},o=0;o<t.length;o++){var u=t[o];if(e===i(u)){var l=r(u,!0);a[l]||(a[l]=n(l,e))}}return a}var l=new RegExp(/\d+/g),c={dates:[],years:[],isUTC:!1,setUTC:function(t){c.isUTC=t||!1},setDates:function(e){c.dates=[];for(var a=t.getDateCol(e,!0),n=0;n<a.length;n++){var r=a[n],o=r.match(l),i=new Date(o[2],o[1]-1,o[0]);c.dates.push(i.getTime())}},makeYearsList:function(){for(var t={},e=0;e<c.dates.length;e++){var a=c.dates[e],n=i(a);t[n]||(t[n]=u(c.dates,n))}c.years=t},insertDataToDates:function(){for(var a=0;a<c.dates.length;a++){var n=c.dates[a],u=i(n),l=("0"+r(n,!0)).slice(-2),s=("0"+o(n)).slice(-2),d=s+"/"+l+"/"+u,g=t.getRowByDateString(d),f={};c.years[+u][+l][+s].events=c.years[+u][+l][+s].events||[],f[e.CONTRACT]=t.getContractVal(g),f[e.TIME]=t.getTimeVal(g),f[e.AMOUNT]=t.getAmountVal(g),c.years[+u][+l][+s].events.push(f)}},getTotalForDay:function(t,e){if(t){for(var a=0,n=0;n<t.length;n++){var r=t[n];a+=r[e]}return a}}};return c}]).directive("calendar",["CalendarFactory","DAY_EVENT_FIELDS",function(t,e){return{restrict:"E",replace:!0,templateUrl:"calendar/calendar.html",scope:{source:"=",selected:"=",isUtc:"="},link:function(a){function n(e){t.setUTC(a.isUtc),t.setDates(e),t.makeYearsList(),t.insertDataToDates()}var r=["January","February","March","April","May","June","July","August","September","October","November","December"];a.getMonthName=function(t){return r[t-1]},a.setSelectedDate=function(e,n,r){a.selected={day:e,month:n,year:r,data:t.years[r][n][e]}},a.$watch("source",function(t,e){t&&t!==e&&n(t)}),function(){a.CalendarFactory=t,a.DAY_EVENT_FIELDS=e}()}}}]),angular.module("outstanding.date_details",["outstanding.calendar"]).directive("dateDetails",["CalendarFactory","DAY_EVENT_FIELDS",function(t,e){return{restrict:"E",replace:!0,scope:{source:"="},templateUrl:"date_details/date_details.html",link:function(a){a.CalendarFactory=t,a.DAY_EVENT_FIELDS=e}}}]),angular.module("outstanding.uploader",[]).directive("uploader",function(){return{restrict:"E",replace:!0,scope:{storage:"="},templateUrl:"uploader/uploader.html",link:function(t){t.$watch("fileContent",function(e,a){e!==a&&(t.storage=e)},!0)}}}).directive("fileReader",function(){return{scope:{fileReader:"="},link:function(t,e){e.on("change",function(e){var a=e.target.files;if(a.length){var n=new FileReader;n.onload=function(e){var a=e.target.result;t.$apply(function(){t.fileReader=a})},n.readAsText(a[0])}})}}}),angular.module("outstanding.pages.landing",["outstanding.calendar","outstanding.date_details","outstanding.uploader","ui.router"]).config(["$stateProvider",function(t){t.state("landing",{url:"/landing",templateUrl:"landing/landing.html",controller:"LandingPageCtrl"})}]).controller("LandingPageCtrl",["$scope","DataFactory",function(t,e){!function(){t.DataFactory=e,t.isUtc=!1}()}]);
//# sourceMappingURL=app.min.js.map