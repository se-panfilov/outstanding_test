"use strict";angular.module("outstanding",["outstanding.templates","outstanding.messages","outstanding.pages.landing","outstanding.data","ngAnimate","ui.router","anim-in-out","angular-loading-bar"]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/landing")}]),angular.module("outstanding.data",[]).factory("DataFactory",["$rootScope","MessagesFactory",function(t,e){var n={CONTRACT:0,DATE:1,TIME:2,AMOUNT:3},a={data:[],parsedData:[],selectedDate:null,parseData:function(t){var n=Papa.parse(t,{skipEmptyLines:!0,dynamicTyping:!0});return n.errors&&e.errorMsg("Cannot parse .csv"),n.data},getCol:function(t,e,n){for(var a=[],r=n?1:0,o=r;o<t.length;o++){var i=t[o];a.push(i[e])}return a},getRow:function(t,e){return t[e]},getContractCol:function(t,e){return a.getCol(t,n.CONTRACT,e)},getDateCol:function(t,e){return a.getCol(t,n.DATE,e)},getTimeCol:function(t,e){return a.getCol(t,n.TIME,e)},getAmountCol:function(t,e){return a.getCol(t,n.AMOUNT,e)},getRowByDateString:function(t){for(var e=1,r=e;r<a.parsedData.length;r++){var o=a.parsedData[r];if(o[n.DATE]===t)return o}},getContractVal:function(t){return t[n.CONTRACT]},getDateVal:function(t){return t[n.DATE]},getTimeVal:function(t){return t[n.TIME]},getAmountVal:function(t){return t[n.AMOUNT]}};return t.$watch(function(){return a.data},function(t,e){t&&t!==e&&(a.parsedData=a.parseData(t))},!0),a}]),angular.module("outstanding.messages",["toaster"]).factory("MessagesFactory",["toaster",function(t){var e={success:"success",error:"error",info:"info",warning:"warning",wait:"wait"},n={error:"Error"},a={successMsg:function(n,a){a=a||null,t.pop(e.success,a,n)},errorMsg:function(a,r){r=r||n.error,t.pop(e.error,r,a)},infoMsg:function(n,a){t.pop(e.info,a,n)}};return a}]),angular.module("outstanding.calendar",[]).constant("DAY_EVENT_FIELDS",{CONTRACT:"contract",AMOUNT:"amount",DATE:"date",TIME:"time"}).constant("DAYS_OF_WEEK",["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]).constant("MONTH_NAMES",["January","February","March","April","May","June","July","August","September","October","November","December"]).factory("CalendarFactory",["DataFactory","DAY_EVENT_FIELDS","MONTH_NAMES",function(t,e,n){function a(t,e){var n=new Date(e,t+1,0);return g.isUTC?n.getUTCDate():n.getDate()}function r(t,e){for(var n={},r=1,o=a(t,e),i=r;o>=i;i++)n[i]={};return n}function o(t,e){var n,a=new Date(t);return n=g.isUTC?a.getUTCMonth():a.getMonth(),n+=e?1:0}function i(t){var e=new Date(t);return g.isUTC?e.getUTCDate():e.getDate()}function u(t){var e=new Date(t);return g.isUTC?e.getUTCFullYear():e.getFullYear()}function s(t,e){for(var n={},a=0;a<t.length;a++){var i=t[a];if(e===u(i)){var s=o(i,!0);n[s]||(n[s]=r(s-1,e))}}return n}function c(e,n){for(var a=t.getDateCol(e,!0),r=0;r<a.length;r++){var o=a[r],i=o.match(l),u=new Date(i[2],i[1]-1,i[0]);n&&n(u.getTime(),i)}}var l=new RegExp(/\d+/g),g={dates:[],years:[],isUTC:!1,setUTC:function(t){g.isUTC=t||!1},setDates:function(t){g.dates=[],c(t,function(t){g.dates.push(t)})},makeYearsList:function(){for(var t={},e=0;e<g.dates.length;e++){var n=g.dates[e],a=u(n);t[a]||(t[a]=s(g.dates,a))}g.years=t},insertDataToDates:function(n){for(var a=1,r=a;r<n.length;r++){var s=n[r],c={},d=t.getDateVal(s),f=d.match(l),D=new Date(f[2],f[1]-1,f[0]),T=D.getTime(),p=""+u(T),C=("0"+o(T,!0)).slice(-2),m=("0"+i(T)).slice(-2);g.years[+p][+C][+m].events=g.years[+p][+C][+m].events||[],c[e.CONTRACT]=t.getContractVal(s),c[e.TIME]=t.getTimeVal(s),c[e.AMOUNT]=t.getAmountVal(s),g.years[+p][+C][+m].events.push(c)}},getTotalForDay:function(t,e){if(t){for(var n=0,a=0;a<t.length;a++){var r=t[a];n+=r[e]}return n}},getMonthName:function(t){return n[t-1]},getDayOfWeek:function(t,e){var n,a=new Date(+e,+t-1,1);n=g.isUTC?a.getUTCDay():a.getDay();var r=[6,0,1,2,3,4,5];return r[n]}};return g}]).directive("calendar",["CalendarFactory","DAY_EVENT_FIELDS","DAYS_OF_WEEK",function(t,e,n){return{restrict:"E",replace:!0,templateUrl:"calendar/calendar.html",scope:{source:"=",selected:"=",isUtc:"="},link:function(a){function r(e){t.setUTC(a.isUtc),t.setDates(e),t.makeYearsList(),t.insertDataToDates(e)}a.setSelectedDate=function(e,n,r){a.selected={day:e,month:n,year:r,data:t.years[r][n][e]}},a.$watch("source",function(t,e){t&&t!==e&&r(t)}),function(){a.CalendarFactory=t,a.DAY_EVENT_FIELDS=e,a.DAYS_OF_WEEK=n}()}}}]),angular.module("outstanding.date_details",["outstanding.calendar"]).directive("dateDetails",["CalendarFactory","DAY_EVENT_FIELDS",function(t,e){return{restrict:"E",replace:!0,scope:{source:"="},templateUrl:"date_details/date_details.html",link:function(n){n.CalendarFactory=t,n.DAY_EVENT_FIELDS=e}}}]).filter("pureTime",function(){return function(t){var e=0,n=".";return t.substr(e,t.lastIndexOf(n))}}),angular.module("outstanding.uploader",[]).directive("uploader",function(){return{restrict:"E",replace:!0,scope:{storage:"="},templateUrl:"uploader/uploader.html",link:function(t){t.$watch("fileContent",function(e,n){e!==n&&(t.storage=e)},!0)}}}).directive("fileReader",function(){return{scope:{fileReader:"="},link:function(t,e){e.on("change",function(e){var n=e.target.files;if(n.length){var a=new FileReader;a.onload=function(e){var n=e.target.result;t.$apply(function(){t.fileReader=n})},a.readAsText(n[0])}})}}}),angular.module("outstanding.pages.landing",["outstanding.calendar","outstanding.date_details","outstanding.uploader","ui.router"]).config(["$stateProvider",function(t){t.state("landing",{url:"/landing",templateUrl:"landing/landing.html",controller:"LandingPageCtrl"})}]).controller("LandingPageCtrl",["$scope","DataFactory",function(t,e){!function(){t.DataFactory=e,t.isUtc=!1}()}]);
//# sourceMappingURL=app.min.js.map