"use strict";angular.module("outstanding",["outstanding.templates","outstanding.pages.landing","outstanding.data","ngAnimate","ui.router","anim-in-out","angular-loading-bar"]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/landing")}]),angular.module("outstanding.data",[]).factory("DataFactory",["$rootScope",function(t){var e={CONTRACT:0,DATE:1,TIME:2,AMOUNT:3},n={data:[],parsedData:[],selectedDate:null,parseData:function(t){return[["Contract","Date","Time","Amount"],[56556,"04/06/2016","09:51:21.565",9385.19]]},getCol:function(t,e,n){for(var a=[],r=n?1:0,o=r;o<t.length;o++){var i=t[o];a.push(i[e])}return a},getRow:function(t,e){return t[e]},getContractCol:function(t,a){return n.getCol(t,e.CONTRACT,a)},getDateCol:function(t,a){return n.getCol(t,e.DATE,a)},getTimeCol:function(t,a){return n.getCol(t,e.TIME,a)},getAmountCol:function(t,a){return n.getCol(t,e.AMOUNT,a)},getRowByDateString:function(t){for(var a=1,r=a;r<n.parsedData.length;r++){var o=n.parsedData[r];if(o[e.DATE]===t)return o}},getContractVal:function(t){return t[e.CONTRACT]},getDateVal:function(t){return t[e.DATE]},getTimeVal:function(t){return t[e.TIME]},getAmountVal:function(t){return t[e.AMOUNT]}};return t.$watch(function(){return n.data},function(t,e){t&&t!==e&&(n.parsedData=n.parseData(t))},!0),n}]),angular.module("outstanding.calendar",[]).constant("DAY_EVENT_FIELDS",{CONTRACT:"contract",AMOUNT:"amount",DATE:"date",TIME:"time"}).factory("CalendarFactory",["DataFactory","DAY_EVENT_FIELDS",function(t,e){function n(t,e){var n=new Date(e,t+1,0);return c.isUTC?n.getUTCDate():n.getDate()}function a(t,e){for(var a={},r=1,o=n(t,e),i=r;o>=i;i++)a[i]={};return a}function r(t,e){var n,a=new Date(t);return n=c.isUTC?a.getUTCMonth():a.getMonth(),n+=e?1:0}function o(t){var e=new Date(t);return c.isUTC?e.getUTCDate():e.getDate()}function i(t){var e=new Date(t);return c.isUTC?e.getUTCFullYear():e.getFullYear()}function u(t,e){for(var n={},o=0;o<t.length;o++){var u=t[o];if(e===i(u)){var l=r(u,!0);n[l]||(n[l]=a(l,e))}}return n}var l=new RegExp(/\d+/g),c={dates:[],years:[],isUTC:!1,setUTC:function(t){c.isUTC=t||!1},setDates:function(e){c.dates=[];for(var n=t.getDateCol(e,!0),a=0;a<n.length;a++){var r=n[a],o=r.match(l),i=new Date(o[2],o[1]-1,o[0]);c.dates.push(i.getTime())}},makeYearsList:function(){for(var t={},e=0;e<c.dates.length;e++){var n=c.dates[e],a=i(n);t[a]||(t[a]=u(c.dates,a))}c.years=t},insertDataToDates:function(){for(var n=0;n<c.dates.length;n++){var a=c.dates[n],u=i(a),l=("0"+r(a,!0)).slice(-2),s=("0"+o(a)).slice(-2),g=s+"/"+l+"/"+u,d=t.getRowByDateString(g),f={};c.years[+u][+l][+s].events=c.years[+u][+l][+s].events||[],f[e.CONTRACT]=t.getContractVal(d),f[e.TIME]=t.getTimeVal(d),f[e.AMOUNT]=t.getAmountVal(d),c.years[+u][+l][+s].events.push(f)}}};return c}]).directive("calendar",["CalendarFactory","DAY_EVENT_FIELDS",function(t,e){return{restrict:"E",replace:!0,templateUrl:"calendar/calendar.html",scope:{source:"=",selected:"=",isUtc:"="},link:function(n){function a(e){t.setUTC(n.isUtc),t.setDates(e),t.makeYearsList(),t.insertDataToDates()}var r=["January","February","March","April","May","June","July","August","September","October","November","December"];n.getMonthName=function(t){return r[t-1]},n.getTotalForDay=function(t,e){if(t){for(var n=0,a=0;a<t.length;a++){var r=t[a];n+=r[e]}return n}},n.$watch("source",function(t,e){t&&t!==e&&a(t)}),function(){n.CalendarFactory=t,n.DAY_EVENT_FIELDS=e}()}}}]),angular.module("outstanding.date_details",[]).directive("date_details",function(){return{restrict:"E",replace:!0,link:function(t,e){console.log("details")}}}),angular.module("outstanding.uploader",[]).directive("uploader",function(){return{restrict:"E",replace:!0,scope:{storage:"="},templateUrl:"uploader/uploader.html",link:function(t){t.$watch("fileContent",function(e,n){e!==n&&(t.storage=e)},!0)}}}).directive("fileReader",function(){return{scope:{fileReader:"="},link:function(t,e){e.on("change",function(e){var n=e.target.files;if(n.length){var a=new FileReader;a.onload=function(e){var n=e.target.result;t.$apply(function(){t.fileReader=n})},a.readAsText(n[0])}})}}}),angular.module("outstanding.pages.landing",["outstanding.calendar","outstanding.date_details","outstanding.uploader","ui.router"]).config(["$stateProvider",function(t){t.state("landing",{url:"/landing",templateUrl:"landing/landing.html",controller:"LandingPageCtrl"})}]).controller("LandingPageCtrl",["$scope","DataFactory",function(t,e){!function(){t.DataFactory=e,t.isUtc=!1}()}]);
//# sourceMappingURL=app.min.js.map